<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="layout">

<head>
    <title>Pending Approvals</title>
    <style>
        .page-header {
            background: linear-gradient(135deg, #007BFF 0%, #0056b3 100%);
            color: white;
            padding: 2rem;
            border-radius: 1rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .page-header h1 {
            color: white;
            border: none;
            margin: 0;
            padding: 0;
            font-size: 2.5rem;
        }

        .approval-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
        }

        .approval-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        }

        .approval-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .info-item {
            padding: 0.75rem;
            background: #f8f9fa;
            border-radius: 0.5rem;
        }

        .info-label {
            font-size: 0.85rem;
            color: #64748B;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-value {
            font-size: 1.1rem;
            color: #1E293B;
            font-weight: 600;
            margin-top: 0.25rem;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .btn-approve {
            flex: 1;
            background: linear-gradient(135deg, #10B981 0%, #0f8e6a 100%);
            border: none;
            color: white;
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-approve:hover {
            background: linear-gradient(135deg, #0f8e6a 0%, #0d7a5a 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .btn-reject {
            flex: 1;
            background: linear-gradient(135deg, #EF4444 0%, #dc2626 100%);
            border: none;
            color: white;
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-reject:hover {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .empty-state {
            background: white;
            padding: 4rem;
            border-radius: 1rem;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .empty-state i {
            font-size: 5rem;
            color: #10B981;
            margin-bottom: 1rem;
            opacity: 0.7;
        }
    </style>
</head>

<body>
    <div layout:fragment="content">
        <div class="page-header">
            <h1>
                <i class="bi bi-check2-circle"></i> Pending Approvals
            </h1>
            <p class="mb-0 mt-2" style="opacity: 0.9;">Review and approve swap requests from staff members.</p>
        </div>

        <div th:if="${approvals.isEmpty()}" class="empty-state">
            <i class="bi bi-check-circle"></i>
            <h3 class="mt-3 mb-2">All Caught Up!</h3>
            <p class="text-muted">There are no pending approvals at this time.</p>
        </div>

        <div th:if="${!approvals.isEmpty()}">
            <div class="approval-card" th:each="swap : ${approvals}">
                <div class="approval-info">
                    <div class="info-item">
                        <div class="info-label">Swap ID</div>
                        <div class="info-value" th:text="${swap.id}">#123</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Original Owner</div>
                        <div class="info-value" th:text="${swap.originalOwner.user.fullName}">Alice Smith</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Claimer</div>
                        <div class="info-value" th:text="${swap.claimer.user.fullName}">Bob Johnson</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Shift Date</div>
                        <div class="info-value" th:text="${#temporals.format(swap.shift.date, 'MMM dd, yyyy')}">Mar 10,
                            2025</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Shift Time</div>
                        <div class="info-value"
                            th:text="${#temporals.format(swap.shift.startTime, 'HH:mm') + ' - ' + #temporals.format(swap.shift.endTime, 'HH:mm')}">
                            08:00 - 16:00</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Unit</div>
                        <div class="info-value" th:text="${swap.shift.unit.displayName}">ICU</div>
                    </div>
                </div>

                <div th:if="${swap.reason}" class="mt-3 p-3 bg-light rounded">
                    <strong>Reason:</strong>
                    <p class="mb-0 mt-1" th:text="${swap.reason}">Swap reason here</p>
                </div>

                <div class="action-buttons">
                    <form th:action="@{/manager/approve/{id}(id=${swap.id})}" method="post" style="flex: 1;">
                        <button type="submit" class="btn-approve w-100">
                            <i class="bi bi-check-circle"></i> Approve
                        </button>
                    </form>
                    <form th:action="@{/manager/reject/{id}(id=${swap.id})}" method="post" style="flex: 1;">
                        <button type="submit" class="btn-reject w-100">
                            <i class="bi bi-x-circle"></i> Reject
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>

</html>